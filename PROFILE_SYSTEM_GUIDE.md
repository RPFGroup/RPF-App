# ๐ค ูุธุงู ุงูููู ุงูุดุฎุตู ุงููุชูุฏู - ุฏููู ุดุงูู
# Advanced Profile System - Comprehensive Guide

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ / Overview

ุชู ุฅูุดุงุก ูุธุงู ููู ุดุฎุตู ูุชูุฏู ูุดุงูู ูุชุถูู ุฌููุน ุงููุนูููุงุช ุงููููุฉ ูููุณุชุฎุฏููู ูุน ูุธุงู ุฅุฏุงุฑุฉ ููุฃูุณุงู ูุงููุณููุงุช ุงููุธูููุฉ.

An advanced and comprehensive profile system has been created that includes all important user information with a management system for departments and job titles.

---

## ๐ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ / New Features

### 1. ๐ค ุงูููู ุงูุดุฎุตู ุงููุญุณู / Enhanced Profile

**ุงูุญููู ุงูุฌุฏูุฏุฉ / New Fields:**
- โ ุงูุงุณู ุงูุฃูู ูุงูุฃุฎูุฑ (First Name & Last Name) - **ูุทููุจ**
- โ ุงููุณู (Department) - ููุฎุชุงุฑ ูู ูุงุฆูุฉ ููุณุฏูุฉ
- โ ุงููุณูู ุงููุธููู (Job Title) - ููุฎุชุงุฑ ูู ูุงุฆูุฉ ููุณุฏูุฉ
- โ ุฑูู ุงููุงุชู ุงูุฃูู (Primary Phone)
- โ ุฑูู ุงููุงุชู ุงูุซุงูู (Secondary Phone) - ุงุฎุชูุงุฑู
- โ ูุจุฐุฉ ุนูู (About/Bio) - ูุต ุญุฑ
- โ ุตูุฑุฉ ุงูููู ุงูุดุฎุตู (Profile Picture URL)
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Email) - ูููุฑุงุกุฉ ููุท

### 2. ๐ข ุฅุฏุงุฑุฉ ุงูุฃูุณุงู / Departments Management

**ูููุฒุงุช ุงูุฃูุณุงู:**
- โ ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ ูุงูุนุฑุจูุฉ
- โ ุงููุตู
- โ ุชุฑุชูุจ ุงูุนุฑุถ
- โ ุญุงูุฉ ุงููุดุงุท (Active/Inactive)
- โ ุฅุถุงูุฉ / ุชุนุฏูู / ุญุฐู (ููุฃุฏูู ููุท)
- โ 10 ุฃูุณุงู ุงูุชุฑุงุถูุฉ ุฌุงูุฒุฉ

### 3. ๐ผ ุฅุฏุงุฑุฉ ุงููุณููุงุช ุงููุธูููุฉ / Job Titles Management

**ูููุฒุงุช ุงููุณููุงุช ุงููุธูููุฉ:**
- โ ุงููุณูู ุจุงูุฅูุฌููุฒูุฉ ูุงูุนุฑุจูุฉ
- โ ุงููุตู
- โ ุชุฑุชูุจ ุงูุนุฑุถ
- โ ุญุงูุฉ ุงููุดุงุท (Active/Inactive)
- โ ุฅุถุงูุฉ / ุชุนุฏูู / ุญุฐู (ููุฃุฏูู ููุท)
- โ 17 ูุณูู ูุธููู ุงูุชุฑุงุถู ุฌุงูุฒ

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช / Database Structure

### ุฌุฏูู `departments` - ุงูุฃูุณุงู

```sql
CREATE TABLE departments (
    id UUID PRIMARY KEY,
    name_en TEXT UNIQUE NOT NULL,
    name_ar TEXT UNIQUE NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT true,
    display_order INTEGER DEFAULT 0,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    created_by UUID,
    updated_by UUID
);
```

### ุฌุฏูู `job_titles` - ุงููุณููุงุช ุงููุธูููุฉ

```sql
CREATE TABLE job_titles (
    id UUID PRIMARY KEY,
    title_en TEXT UNIQUE NOT NULL,
    title_ar TEXT UNIQUE NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT true,
    display_order INTEGER DEFAULT 0,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    created_by UUID,
    updated_by UUID
);
```

### ุชุญุฏูุซุงุช ุฌุฏูู `users`

**ุงูุญููู ุงูุฌุฏูุฏุฉ:**
```sql
ALTER TABLE users ADD COLUMN first_name TEXT;
ALTER TABLE users ADD COLUMN last_name TEXT;
ALTER TABLE users ADD COLUMN department_id UUID REFERENCES departments(id);
ALTER TABLE users ADD COLUMN job_title_id UUID REFERENCES job_titles(id);
ALTER TABLE users ADD COLUMN phone_1 TEXT;
ALTER TABLE users ADD COLUMN phone_2 TEXT;
ALTER TABLE users ADD COLUMN about TEXT;
ALTER TABLE users ADD COLUMN profile_picture_url TEXT;
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู / How to Use

### ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
**Step 1: Setup Database**

```sql
-- ุชุดุบูู ููู ุฅูุดุงุก ุงูุฌุฏุงูู
\i Database/profile-enhancement-tables.sql
```

ูุฐุง ุงูููู ุณูููู ุจู:
- ุฅูุดุงุก ุฌุฏูู ุงูุฃูุณุงู ูุน 10 ุฃูุณุงู ุงูุชุฑุงุถูุฉ
- ุฅูุดุงุก ุฌุฏูู ุงููุณููุงุช ุงููุธูููุฉ ูุน 17 ูุณูู ุงูุชุฑุงุถู
- ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ ูุฌุฏูู ุงููุณุชุฎุฏููู
- ุฅูุดุงุก ุงูููุงุฑุณ ูุงูุตูุงุญูุงุช
- ุฅูุดุงุก ุงูุฏูุงู ุงููุณุงุนุฏุฉ

### ุงูุฎุทูุฉ 2: ุงููุตูู ููููู ุงูุดุฎุตู
**Step 2: Access Profile**

1. ุงูุชูู ุฅูู **Settings** ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
2. ุงุฎุชุฑ ุชุจููุจ **Profile**
3. ุงููุฃ ุงููุนูููุงุช ุงููุทููุจุฉ:
   - **ุงูุงุณู ุงูุฃูู ูุงูุฃุฎูุฑ** (ูุทููุจ)
   - **ุงููุณู** (ุงุฎุชูุงุฑู)
   - **ุงููุณูู ุงููุธููู** (ุงุฎุชูุงุฑู)
   - **ุฑูู ุงููุงุชู ุงูุฃูู** (ุงุฎุชูุงุฑู)
   - **ุฑูู ุงููุงุชู ุงูุซุงูู** (ุงุฎุชูุงุฑู)
   - **ูุจุฐุฉ ุนูู** (ุงุฎุชูุงุฑู)
4. ุงุถุบุท **Save Changes**

### ุงูุฎุทูุฉ 3: ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููุณููุงุช (ููุฃุฏูู ููุท)
**Step 3: Manage Departments & Titles (Admin Only)**

1. ุงูุชูู ุฅูู **Settings**
2. ุงุฎุชุฑ ุชุจููุจ **Departments & Titles**
3. ุงุฎุชุฑ ุจูู:
   - **Departments** - ูุฅุฏุงุฑุฉ ุงูุฃูุณุงู
   - **Job Titles** - ูุฅุฏุงุฑุฉ ุงููุณููุงุช ุงููุธูููุฉ

**ูุฅุถุงูุฉ ูุณู ุฌุฏูุฏ:**
- ุงููุฃ ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ ูุงูุนุฑุจูุฉ
- ุฃุถู ูุตู (ุงุฎุชูุงุฑู)
- ุงุถุบุท **Add Department**

**ูุชุนุฏูู ูุณู:**
- ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุนุฏูู โ๏ธ
- ุนุฏู ุงููุนูููุงุช
- ุงุถุบุท **Save**

**ูุญุฐู ูุณู:**
- ุงุถุบุท ุนูู ุฃููููุฉ ุงูุญุฐู ๐๏ธ
- ุฃูุฏ ุงูุญุฐู

---

## ๐ ุงูุฃูุณุงู ุงูุงูุชุฑุงุถูุฉ / Default Departments

1. **Engineering** / ุงูููุฏุณุฉ
2. **Project Management** / ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน
3. **Quality Control** / ูุฑุงูุจุฉ ุงูุฌูุฏุฉ
4. **Safety** / ุงูุณูุงูุฉ
5. **Finance** / ุงููุงููุฉ
6. **HR** / ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ
7. **IT** / ุชูููุฉ ุงููุนูููุงุช
8. **Operations** / ุงูุนูููุงุช
9. **Procurement** / ุงููุดุชุฑูุงุช
10. **Administration** / ุงูุฅุฏุงุฑุฉ

---

## ๐ผ ุงููุณููุงุช ุงููุธูููุฉ ุงูุงูุชุฑุงุถูุฉ / Default Job Titles

1. **Project Manager** / ูุฏูุฑ ูุดุฑูุน
2. **Site Engineer** / ูููุฏุณ ูููุน
3. **Senior Engineer** / ูููุฏุณ ุฃูู
4. **Engineer** / ูููุฏุณ
5. **Assistant Engineer** / ูููุฏุณ ูุณุงุนุฏ
6. **Supervisor** / ูุดุฑู
7. **Foreman** / ุฑุฆูุณ ุนูุงู
8. **QC Inspector** / ููุชุด ุฌูุฏุฉ
9. **Safety Officer** / ูุณุคูู ุงูุณูุงูุฉ
10. **Technical Office Engineer** / ูููุฏุณ ููุชุจ ููู
11. **Planning Engineer** / ูููุฏุณ ุชุฎุทูุท
12. **Quantity Surveyor** / ูููุฏุณ ูููุงุช
13. **Procurement Officer** / ูุณุคูู ูุดุชุฑูุงุช
14. **HR Manager** / ูุฏูุฑ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ
15. **Finance Manager** / ูุฏูุฑ ูุงูู
16. **Administrator** / ุฅุฏุงุฑู
17. **Executive** / ุชูููุฐู

---

## ๐ง ุงูุฏูุงู ุงููุณุงุนุฏุฉ / Helper Functions

### 1. ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
**Update User Profile**

```sql
SELECT update_user_profile(
    user_id := 'user-uuid-here',
    p_first_name := 'Ahmed',
    p_last_name := 'Mohamed',
    p_department_id := 'dept-uuid-here',
    p_job_title_id := 'title-uuid-here',
    p_phone_1 := '+966 XXX XXX XXXX',
    p_phone_2 := '+966 XXX XXX XXXX',
    p_about := 'Experienced engineer...',
    p_profile_picture_url := 'https://...'
);
```

### 2. ุงูุญุตูู ุนูู ุงุณู ุงููุณู
**Get Department Name**

```sql
-- ุจุงูุฅูุฌููุฒูุฉ
SELECT get_department_name('dept-uuid-here', 'en');

-- ุจุงูุนุฑุจูุฉ
SELECT get_department_name('dept-uuid-here', 'ar');
```

### 3. ุงูุญุตูู ุนูู ุงููุณูู ุงููุธููู
**Get Job Title**

```sql
-- ุจุงูุฅูุฌููุฒูุฉ
SELECT get_job_title('title-uuid-here', 'en');

-- ุจุงูุนุฑุจูุฉ
SELECT get_job_title('title-uuid-here', 'ar');
```

### 4. ุงูุญุตูู ุนูู ุงูุงุณู ุงููุงูู
**Get User Full Name**

```sql
SELECT get_user_full_name('user-uuid-here');
-- Returns: "Ahmed Mohamed"
```

---

## ๐ฑ ููููุงุช ุงููุงุฌูุฉ / UI Components

### 1. ProfileManager.tsx
**ุงูููู ุงูุดุฎุตู ูููุณุชุฎุฏู**

**ุงููููุฒุงุช:**
- ุนุฑุถ ูุชุนุฏูู ุฌููุน ูุนูููุงุช ุงููุณุชุฎุฏู
- ูุงุฌูุฉ ุณููุฉ ูููุธูุฉ
- ููุงุฆู ููุณุฏูุฉ ููุฃูุณุงู ูุงููุณููุงุช
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุญูุธ ุชููุงุฆู

**ุงูุงุณุชุฎุฏุงู:**
```tsx
import { ProfileManager } from '@/components/settings/ProfileManager'

function SettingsPage() {
  return <ProfileManager />
}
```

### 2. DepartmentsJobTitlesManager.tsx
**ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููุณููุงุช (ููุฃุฏูู)**

**ุงููููุฒุงุช:**
- ุชุจููุจุงุช ูููุตูุฉ ููุฃูุณุงู ูุงููุณููุงุช
- ุฅุถุงูุฉ / ุชุนุฏูู / ุญุฐู
- ุชูุนูู / ุชุนุทูู
- ุชุฑุชูุจ ุงูุนุฑุถ
- ุฏุนู ุงููุบุชูู (ุฅูุฌููุฒู / ุนุฑุจู)

**ุงูุงุณุชุฎุฏุงู:**
```tsx
import { DepartmentsJobTitlesManager } from '@/components/settings/DepartmentsJobTitlesManager'

function AdminSettings() {
  return <DepartmentsJobTitlesManager />
}
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช / Security & Permissions

### ุตูุงุญูุงุช ุงููุฑุงุกุฉ / Read Permissions

**ุงูุฃูุณุงู ูุงููุณููุงุช:**
- โ ุฌููุน ุงููุณุชุฎุฏููู ูููููู ุฑุคูุฉ ุงูุฃูุณุงู ูุงููุณููุงุช ุงููุดุทุฉ
- โ ููุท ุงูุฃุฏูู ูููููู ุฑุคูุฉ ุงูุฃูุณุงู ูุงููุณููุงุช ุบูุฑ ุงููุดุทุฉ

**ุงูููู ุงูุดุฎุตู:**
- โ ูู ูุณุชุฎุฏู ููููู ุฑุคูุฉ ูููู ุงูุดุฎุตู
- โ ุงููุณุชุฎุฏููู ุงูุขุฎุฑูู ูููููู ุฑุคูุฉ ูุนูููุงุช ูุญุฏูุฏุฉ ููุท

### ุตูุงุญูุงุช ุงููุชุงุจุฉ / Write Permissions

**ุงูุฃูุณุงู ูุงููุณููุงุช:**
- โ ููุท ุงูุฃุฏูู ูููููู ุฅุถุงูุฉ / ุชุนุฏูู / ุญุฐู ุงูุฃูุณุงู ูุงููุณููุงุช

**ุงูููู ุงูุดุฎุตู:**
- โ ูู ูุณุชุฎุฏู ููููู ุชุนุฏูู ูููู ุงูุดุฎุตู
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุง ูููู ุชุนุฏููู

---

## ๐ View ููููู ุงูุดุฎุตู ุงููุงูู / Complete Profile View

ุชู ุฅูุดุงุก View ูุณูููุฉ ุงููุตูู ูููุนูููุงุช ุงููุงููุฉ:

```sql
CREATE VIEW user_profiles_complete AS
SELECT 
    u.id,
    u.email,
    u.first_name,
    u.last_name,
    u.full_name,
    u.role,
    u.phone_1,
    u.phone_2,
    u.about,
    u.profile_picture_url,
    u.is_active,
    d.id as department_id,
    d.name_en as department_name_en,
    d.name_ar as department_name_ar,
    jt.id as job_title_id,
    jt.title_en as job_title_en,
    jt.title_ar as job_title_ar,
    u.created_at,
    u.updated_at
FROM users u
LEFT JOIN departments d ON u.department_id = d.id
LEFT JOIN job_titles jt ON u.job_title_id = jt.id;
```

**ุงูุงุณุชุฎุฏุงู:**
```sql
-- ุงูุญุตูู ุนูู ุงูููู ุงูุดุฎุตู ุงููุงูู ููุณุชุฎุฏู
SELECT * FROM user_profiles_complete WHERE id = 'user-uuid-here';

-- ุงูุญุตูู ุนูู ุฌููุน ุงููุณุชุฎุฏููู ูู ูุณู ูุนูู
SELECT * FROM user_profiles_complete WHERE department_id = 'dept-uuid-here';

-- ุงูุญุตูู ุนูู ุฌููุน ุงููุณุชุฎุฏููู ุจูุณูู ูุธููู ูุนูู
SELECT * FROM user_profiles_complete WHERE job_title_id = 'title-uuid-here';
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู / User Interface

### ุชุตููู ุงูููู ุงูุดุฎุตู / Profile Design

**ุงูุฃูุณุงู:**
1. **Profile Picture** - ุตูุฑุฉ ุงูููู ุงูุดุฎุตู
2. **Basic Information** - ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ (ุงูุงุณูุ ุงูุจุฑูุฏุ ุงููุงุชู)
3. **Organization Information** - ูุนูููุงุช ุงูููุธูุฉ (ุงููุณูุ ุงููุณูู ุงููุธููู)
4. **About Me** - ูุจุฐุฉ ุนูู

**ุงููููุฒุงุช:**
- โ ุชุตููู ุนุตุฑู ูููุธู
- โ ุฑููุฒ ุชูุถูุญูุฉ ููู ูุณู
- โ ุญููู ูุทููุจุฉ ูุญุฏุฏุฉ ุจูุถูุญ
- โ ุฑุณุงุฆู ูุณุงุนุฏุฉ ูููุณุชุฎุฏู
- โ ุฏุนู ุงููุถุน ุงููููู

### ุชุตููู ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููุณููุงุช / Departments & Titles Design

**ุงููููุฒุงุช:**
- โ ุชุจููุจุงุช ูููุตูุฉ
- โ ูููุฐุฌ ุฅุถุงูุฉ ุณุฑูุน
- โ ูุงุฆูุฉ ููุธูุฉ ูุน ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช
- โ ุชุนุฏูู ุณุฑูุน ูู ุงูููุงู
- โ ุชุฃููุฏ ูุจู ุงูุญุฐู

---

## ๐ ุงูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู / Integration with Other Systems

### 1. ูุธุงู ุงููุณุชุฎุฏููู / User System
- ุงูููู ุงูุดุฎุตู ูุฑุชุจุท ุจุฌุฏูู ุงููุณุชุฎุฏููู
- ูููู ุนุฑุถ ูุนูููุงุช ุงููุณุชุฎุฏู ูู ุฃู ููุงู ุจุงูุชุทุจูู

### 2. ูุธุงู ุงูุชูุงุฑูุฑ / Reporting System
- ูููู ุฅูุดุงุก ุชูุงุฑูุฑ ุญุณุจ ุงููุณู
- ูููู ุฅูุดุงุก ุชูุงุฑูุฑ ุญุณุจ ุงููุณูู ุงููุธููู
- ุนุฑุถ ุงูุงุณู ุงููุงูู ูู ุฌููุน ุงูุชูุงุฑูุฑ

### 3. ูุธุงู ุงูุตูุงุญูุงุช / Permissions System
- ูููู ุฑุจุท ุงูุตูุงุญูุงุช ุจุงูุฃูุณุงู
- ูููู ุฑุจุท ุงูุตูุงุญูุงุช ุจุงููุณููุงุช ุงููุธูููุฉ
- ุชุญูู ุฏููู ูู ุงููุตูู

---

## ๐ ุงูุฎูุงุตุฉ / Summary

ุชู ุฅูุดุงุก ูุธุงู ููู ุดุฎุตู ูุชูุฏู ูููุฑ:

โ **ูุนูููุงุช ุดุงููุฉ** - ุฌููุน ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ููุงู ูุงุญุฏ
โ **ุฅุฏุงุฑุฉ ูุฑูุฉ** - ุณูููุฉ ุฅุถุงูุฉ ูุชุนุฏูู ุงูุฃูุณุงู ูุงููุณููุงุช
โ **ูุงุฌูุฉ ุนุตุฑูุฉ** - ุชุตููู ุงุญุชุฑุงูู ูุณูู ุงูุงุณุชุฎุฏุงู
โ **ุฃูุงู ูุชูุฏู** - ุตูุงุญูุงุช ูุญุฏุฏุฉ ููุญููุฉ
โ **ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช** - ุฅูุฌููุฒู ูุนุฑุจู
โ **ุชูุงูู ูุงูู** - ูุฑุชุจุท ูุน ุฌููุน ุฃูุธูุฉ ุงูุชุทุจูู
โ **ุจูุงูุงุช ุงูุชุฑุงุถูุฉ** - 10 ุฃูุณุงู ู17 ูุณูู ูุธููู ุฌุงูุฒ
โ **ุณูููุฉ ุงูุตูุงูุฉ** - ููุฏ ููุธู ูููุซู

**ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**

---

## ๐ ููุงุญุธุงุช ูููุฉ / Important Notes

1. **ุงูุฃูุณุงู ูุงููุณููุงุช**:
   - ูููู ููุฃุฏูู ููุท ุฅุถุงูุฉ ุฃู ุชุนุฏูู ุงูุฃูุณุงู ูุงููุณููุงุช
   - ุฌููุน ุงููุณุชุฎุฏููู ูููููู ุฑุคูุฉ ูุงุฎุชูุงุฑ ุงูุฃูุณุงู ูุงููุณููุงุช ุงููุดุทุฉ

2. **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**:
   - ูุง ูููู ุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูู ุงูููู ุงูุดุฎุตู
   - ูุฌุจ ุงูุชูุงุตู ูุน ุงููุณุคูู ูุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

3. **ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ**:
   - ุญุงููุงู ูุชู ุฅุฏุฎุงู ุฑุงุจุท URL ููุตูุฑุฉ
   - ูู ุงููุณุชูุจู ูููู ุฅุถุงูุฉ ุฑูุน ุงูุตูุฑ ูุจุงุดุฑุฉ

4. **ุงูุญููู ุงููุทููุจุฉ**:
   - ุงูุงุณู ุงูุฃูู ูุงูุฃุฎูุฑ ููุท ูุทููุจุงู
   - ุจุงูู ุงูุญููู ุงุฎุชูุงุฑูุฉ

---

**ุชู ุฅูุดุงุก ูุธุงู ููู ุดุฎุตู ูุชูุฏู ูุงุญุชุฑุงูู! ๐**
