# ๐ง ุฅุตูุงุญ ูุดุงูู ุงูุฅุนุฏุงุฏุงุช ุงูุซูุงุซุฉ

## ๐ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1๏ธโฃ **ูุดููุฉ ุตูุงุญูุงุช ุงูุฃูุณุงู (Departments)**
**ุงููุดููุฉ:**
```
Failed to add department: permission denied for table departments
```

**ุงูุญู:** โ ุฃูุดุฃูุง ุณูุฑูุจุช `Database/fix_departments_rls.sql`

---

### 2๏ธโฃ **ูุดููุฉ ุงููุบุฉ ุงูุนุฑุจูุฉ ุงูุฅุฌุจุงุฑูุฉ**
**ุงููุดููุฉ:** ุงูุญูู ุงูุนุฑุจู ูุงู ุฅุฌุจุงุฑู ูู ุงูุฃูุณุงู ูุงููุณููุงุช ุงููุธูููุฉ

**ุงูุญู:** โ ุฌุนููุง ุงูุญูู ุงูุนุฑุจู ุงุฎุชูุงุฑู ูุน ุฅุถุงูุฉ ุนูุงูุฉ "(ุงุฎุชูุงุฑู)"

---

### 3๏ธโฃ **ูุดููุฉ ุงูุนููุงุช (Currencies)**
**ุงููุดููุฉ:**
```
Could not find the 'usage_count' column of 'currencies' in the schema cache
```

**ุงูุญู:** โ ุฃูุดุฃูุง ุณูุฑูุจุช `Database/fix_currencies_usage_count.sql`

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### **ุงูุฎุทูุฉ 1: ุชุดุบูู ุณูุฑูุจุช ุงูุฃูุณุงู**
1. ุงูุชุญ **Supabase Dashboard**
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุญุชูู ููู `Database/fix_departments_rls.sql`
4. ุงูุตู ุงููุญุชูู ูู ุงููุญุฑุฑ
5. ุงุถุบุท **Run** ุฃู **F5**
6. ุงูุชุธุฑ ุฑุณุงูุฉ ุงููุฌุงุญ โ

```sql
-- ูุฌุจ ุฃู ุชุธูุฑ ุงูุฑุณุงูุฉ:
-- Departments RLS policies fixed successfully!
```

---

### **ุงูุฎุทูุฉ 2: ุชุดุบูู ุณูุฑูุจุช ุงูุนููุงุช**
1. ูู ููุณ **SQL Editor** ูู Supabase
2. ุงูุณุฎ ูุญุชูู ููู `Database/fix_currencies_usage_count.sql`
3. ุงูุตู ุงููุญุชูู ูู ุงููุญุฑุฑ
4. ุงุถุบุท **Run** ุฃู **F5**
5. ุงูุชุธุฑ ุฑุณุงูุฉ ุงููุฌุงุญ โ

```sql
-- ูุฌุจ ุฃู ุชุธูุฑ ุงูุฑุณุงูุฉ:
-- Currencies table usage_count column added successfully!
```

---

### **ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููุธุงู**

#### **ุฃ. ุงุฎุชุจุงุฑ ุงูุฃูุณุงู ูุงููุณููุงุช ุงููุธูููุฉ:**
1. ุณุฌู ุฏุฎูู ูู **Admin**
2. ุงุฐูุจ ุฅูู **Settings** โ๏ธ
3. ุงุฎุชุฑ **Departments & Job Titles**
4. ุฌุฑุจ ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ:
   - โ ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฃุฎุทุงุก
   - โ ุงูุญูู ุงูุฅูุฌููุฒู ููุท **ูุทููุจ**
   - โ ุงูุญูู ุงูุนุฑุจู **ุงุฎุชูุงุฑู** (ูุธูุฑ "ุงุฎุชูุงุฑู" ุจุฌุงูุจู)
5. ุฌุฑุจ ุฅุถุงูุฉ ูุณู ุจุงูุฅูุฌููุฒูุฉ ููุท - ูุฌุจ ุฃู ูุนูู โ
6. ุฌุฑุจ ุฅุถุงูุฉ ูุณู ุจุงูุฅูุฌููุฒูุฉ ูุงูุนุฑุจูุฉ - ูุฌุจ ุฃู ูุนูู โ

#### **ุจ. ุงุฎุชุจุงุฑ ุงูุนููุงุช:**
1. ูู ููุณ ุตูุญุฉ **Settings** โ๏ธ
2. ุงุฎุชุฑ **Currencies Management**
3. ูุฌุจ ุฃู ุชูุชุญ ุงูุตูุญุฉ **ุจุฏูู ุฃุฎุทุงุก** โ
4. ูุฌุจ ุฃู ุชุธูุฑ ุงูุนููุงุช ุงูููุฌูุฏุฉ โ
5. ุงูุนููุงุช ุงููุณุชุฎุฏูุฉ ูู ูุดุงุฑูุน ูุฌุจ ุฃู ุชุธูุฑ "Used in X projects" โ
6. ุฌุฑุจ ุฅุถุงูุฉ ุนููุฉ ุฌุฏูุฏุฉ - ูุฌุจ ุฃู ูุนูู โ

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

### **ุนูุงูุงุช ุงููุฌุงุญ:**

#### **ุงูุฃูุณุงู ูุงููุณููุงุช ุงููุธูููุฉ:**
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุตูุงุญูุงุช
- โ ูููู ุฅุถุงูุฉ ูุณู ุฌุฏูุฏ
- โ ุงูุญูู ุงูุนุฑุจู ุงุฎุชูุงุฑู
- โ ูุธูุฑ "(ุงุฎุชูุงุฑู)" ุจุฌุงูุจ ุงูุญูู ุงูุนุฑุจู

#### **ุงูุนููุงุช:**
- โ ุงูุตูุญุฉ ุชูุชุญ ุจุฏูู ูุดุงูู
- โ ุชุธูุฑ ุฌููุน ุงูุนููุงุช
- โ ูุธูุฑ ุนุฏุฏ ุงููุดุงุฑูุน ุงููุณุชุฎุฏูุฉ ููู ุนููุฉ
- โ ูููู ุฅุถุงูุฉ ุนููุงุช ุฌุฏูุฏุฉ

---

## ๐ฏ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### **ูุจู ุงูุฅุตูุงุญ:**
- โ ุฎุทุฃ ุตูุงุญูุงุช ูู ุงูุฃูุณุงู
- โ ุงูุญูู ุงูุนุฑุจู ุฅุฌุจุงุฑู
- โ ุตูุญุฉ ุงูุนููุงุช ูุง ุชุนูู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุฆุฉ

### **ุจุนุฏ ุงูุฅุตูุงุญ:**
- โ ุงูุฃุฏูู ููููู ุฅุถุงูุฉ ุงูุฃูุณุงู
- โ ุงูุญูู ุงูุนุฑุจู ุงุฎุชูุงุฑู ููุงุถุญ
- โ ุตูุญุฉ ุงูุนููุงุช ุชุนูู ุจุดูู ูุงูู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ

---

## ๐ ุฅุฐุง ุธูุฑุช ูุดุงูู

### **1. ุฅุฐุง ุงุณุชูุฑ ุฎุทุฃ ุตูุงุญูุงุช ุงูุฃูุณุงู:**
```sql
-- ุชุญูู ูู ุงูุณูุงุณุงุช ูู Supabase SQL Editor:
SELECT policyname, cmd 
FROM pg_policies 
WHERE tablename = 'departments';

-- ูุฌุจ ุฃู ุชุธูุฑ 5 ุณูุงุณุงุช ุนูู ุงูุฃูู
```

### **2. ุฅุฐุง ุงุณุชูุฑ ุฎุทุฃ ุงูุนููุงุช:**
```sql
-- ุชุญูู ูู ูุฌูุฏ ุงูุนููุฏ ูู Supabase SQL Editor:
SELECT column_name, data_type
FROM information_schema.columns 
WHERE table_name = 'currencies' 
AND column_name = 'usage_count';

-- ูุฌุจ ุฃู ูุธูุฑ:
-- usage_count | integer
```

### **3. ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ:**
- ูู **Supabase Dashboard**
- ุงุฐูุจ ุฅูู **Settings** > **API**
- ุงุถุบุท **Reset** ููู **Schema Cache**
- ุงูุชุธุฑ 30 ุซุงููุฉ
- ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู

---

## ๐ ุงููููุงุช ุงููุนููุฉ

### **ูููุงุช SQL ุงูุฌุฏูุฏุฉ:**
1. โ `Database/fix_departments_rls.sql` - ุฅุตูุงุญ ุตูุงุญูุงุช ุงูุฃูุณุงู
2. โ `Database/fix_currencies_usage_count.sql` - ุฅุตูุงุญ ุฌุฏูู ุงูุนููุงุช

### **ูููุงุช ุงูุชูุซูู:**
1. โ `FIX_DEPARTMENTS_PERMISSIONS_AND_ARABIC.md` - ุดุฑุญ ุฅุตูุงุญ ุงูุฃูุณุงู
2. โ `FIX_CURRENCIES_USAGE_COUNT.md` - ุดุฑุญ ุฅุตูุงุญ ุงูุนููุงุช
3. โ `ALL_SETTINGS_FIXES_SUMMARY.md` - ููุฎุต ูุงูู ุจุงูุฅูุฌููุฒูุฉ
4. โ `ุงุตูุงุญ_ุงูุงุนุฏุงุฏุงุช_ุงูุซูุงุซุฉ.md` - ูุฐุง ุงูููู (ุชุนูููุงุช ุจุงูุนุฑุจูุฉ)

### **ูููุงุช ุงูููุฏ ุงููุนุฏูุฉ:**
1. โ `components/settings/DepartmentsJobTitlesManager.tsx` - ุฌุนู ุงูุนุฑุจูุฉ ุงุฎุชูุงุฑูุฉ

---

## ๐ ููุฎุต ุณุฑูุน

ุชู ุฅุตูุงุญ **3 ูุดุงูู ุฑุฆูุณูุฉ** ูู ูุธุงู ุงูุฅุนุฏุงุฏุงุช:

1. **โ ุงูุฃูุณุงู** - ุงูุฃุฏูู ุงูุขู ููููู ุงูุฅุถุงูุฉ ูุงูุชุนุฏูู
2. **โ ุงููุบุฉ ุงูุนุฑุจูุฉ** - ุฃุตุจุญุช ุงุฎุชูุงุฑูุฉ ูููุณุช ุฅุฌุจุงุฑูุฉ
3. **โ ุงูุนููุงุช** - ุงูุตูุญุฉ ุชุนูู ูุชุนุฑุถ ุนุฏุฏ ุงููุดุงุฑูุน

**ุฎุทูุงุช ุงูุชุทุจูู:**
1. ุดุบู ุณูุฑูุจุช `fix_departments_rls.sql`
2. ุดุบู ุณูุฑูุจุช `fix_currencies_usage_count.sql`
3. ุงุฎุชุจุฑ ุงููุธุงู
4. ุงุณุชูุชุน! ๐

---

**ุงูุญุงูุฉ:** โ ุฌููุน ุงููุดุงูู ุชู ุญููุง  
**ุนุฏุฏ ุงูุฅุตูุงุญุงุช:** 3  
**ุณูุฑูุจุชุงุช SQL:** 2  
**ูููุงุช ูุนุฏูุฉ:** 1  
**ุขุฎุฑ ุชุญุฏูุซ:** 16 ุฃูุชูุจุฑ 2025
