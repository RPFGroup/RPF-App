# ๐ ุฏููู ุงูุตูุญุฉ ุงูุดุฎุตูุฉ ูููุณุชุฎุฏู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ุตูุญุฉ ุดุฎุตูุฉ ุดุงููุฉ ููู ูุณุชุฎุฏู ุชุชูุญ ุฅุฏุงุฑุฉ ูุนูููุงุชู ุงูุดุฎุตูุฉุ ุชุบููุฑ ูููุฉ ุงููุฑูุฑุ ูุนุฑุถ ุงูุตูุงุญูุงุช ูุงูุฅุญุตุงุฆูุงุช.

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ

### 1. **app/(authenticated)/profile/page.tsx**
- ุตูุญุฉ Next.js ุงูุฑุฆูุณูุฉ ููููู ุงูุดุฎุตู
- Route: `/profile`

### 2. **components/users/UserProfile.tsx**
- ุงููููู ุงูุฃุณุงุณู ููุตูุญุฉ ุงูุดุฎุตูุฉ
- ูุญุชูู ุนูู ุฌููุน ุงููุธุงุฆู ูุงููุงุฌูุฉ

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. **ูุนูููุงุช ุดุฎุตูุฉ ูุงุจูุฉ ููุชุนุฏูู** ๐ค
- ุงูุงุณู ุงููุงูู (Full Name)
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Read-only)
- ุงููุณู (Division)
- ุงูููุตุจ/ุงูููุจ (Position)
- ุฑูู ุงููุงุชู (Phone)

**ููููุฉ ุงูุชุนุฏูู:**
1. ุงููุฑ ุนูู ุฒุฑ "Edit Profile"
2. ุนุฏูู ุงูุญููู ุงููุทููุจุฉ
3. ุงููุฑ ุนูู "Save Changes"
4. ุฃู "Cancel" ููุชุฑุงุฌุน

### 2. **ุฅุนุฏุงุฏุงุช ุงูุฃูุงู** ๐
- ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ (6 ุฃุญุฑู ุนูู ุงูุฃูู)
- ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
- ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ

**ุฎุทูุงุช ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:**
1. ุงููุฑ ุนูู "Change Password"
2. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
3. ุฃูุฏ ูููุฉ ุงููุฑูุฑ
4. ุงููุฑ ุนูู "Update Password"

### 3. **ุนุฑุถ ุงูุตูุงุญูุงุช** ๐ก๏ธ
- ุนุฑุถ ุฌููุน ุงูุตูุงุญูุงุช ุงููุฎุตุตุฉ ูููุณุชุฎุฏู
- ุงูุตูุงุญูุงุช ููุณูุฉ ุญุณุจ ุงููุฆุฉ:
  - **Projects**: ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน
  - **BOQ**: ุฅุฏุงุฑุฉ ุงูุฃูุดุทุฉ
  - **KPI**: ุฅุฏุงุฑุฉ ูุคุดุฑุงุช ุงูุฃุฏุงุก
  - **Reports**: ุงูุชูุงุฑูุฑ
  - **Users**: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
  - **Settings**: ุงูุฅุนุฏุงุฏุงุช
  - **System**: ุตูุงุญูุงุช ุงููุธุงู

**ูุคุดุฑุงุช ูููุฉ:**
- โ **Custom Badge**: ูุธูุฑ ุฅุฐุง ูุงู ูุฏูู ุตูุงุญูุงุช ูุฎุตุตุฉ
- ๐ข **Permission Count**: ุนุฏุฏ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ
- ๐ **Role Description**: ูุตู ุงูุฏูุฑ ุงููุธููู

### 4. **ุฅุญุตุงุฆูุงุช ุงููุดุงุท** ๐
- ุนุฏุฏ ุงููุดุงุฑูุน ุงูููุดุฃุฉ
- ุนุฏุฏ ุงูุฃูุดุทุฉ ุงููุถุงูุฉ
- ุนุฏุฏ ุณุฌูุงุช KPI ุงููุณุฌูุฉ
- ุขุฎุฑ ูุดุงุท

### 5. **ูุนูููุงุช ุงูุญุณุงุจ** โน๏ธ
- ุชุงุฑูุฎ ุฅูุดุงุก ุงูุญุณุงุจ
- ุขุฎุฑ ุชุญุฏูุซ
- ุขุฎุฑ ุชุณุฌูู ุฏุฎูู
- ุญุงูุฉ ุงูุญุณุงุจ (Active/Inactive)

---

## ๐จ ุงูุชุตููู ูุงููุงุฌูุฉ

### **ุชุฎุทูุท ุซูุงุซู ุงูุฃุนูุฏุฉ:**
- **ุงูุนููุฏ ุงูุฃูุณุฑ (ุงูุฑุฆูุณู)**: ูุนูููุงุช ุดุฎุตูุฉ ูุฅุนุฏุงุฏุงุช ุงูุฃูุงู ูุงูุตูุงุญูุงุช
- **ุงูุนููุฏ ุงูุฃููู**: ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ ููุนูููุงุช ุงูุญุณุงุจ

### **ุงุณุชุฌุงุจุฉ ูุงููุฉ:**
- ุชุตููู ูุชุฌุงูุจ ูุน ุงููุงุชู ูุงูุชุงุจูุช ูุงูุญุงุณูุจ
- ูุชุญูู ุฅูู ุนููุฏ ูุงุญุฏ ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ

---

## ๐ ุชูุงูู ูุน ุงููุธุงู

### **ุงูุชูุงูู ูุน Sidebar:**
```typescript
// ุชู ุฅุถุงูุฉ "My Profile" ูู ูุงุฆูุฉ ุงูุชููู
{ icon: User, label: 'My Profile', tab: 'profile' }
```

### **ุงููุณุงุฑ:**
```
/profile
```

### **ุงูุตูุงุญูุงุช ุงููุทููุจุฉ:**
- ูู ูุณุชุฎุฏู ููููู ุงููุตูู ุฅูู ุตูุญุชู ุงูุดุฎุตูุฉ
- ุชุนุฏูู ุงููุนูููุงุช ุงูุดุฎุตูุฉ ูุชุงุญ ููุฌููุน
- ุงูุตูุงุญูุงุช ุงููุนุฑูุถุฉ ุชุนุชูุฏ ุนูู ุฏูุฑ ุงููุณุชุฎุฏู

---

## ๐ ูุนูููุงุช ุงููุดุงุท

### **ุงูุจูุงูุงุช ุงููุนุฑูุถุฉ:**

#### 1. **Projects Created**
```sql
SELECT COUNT(*) FROM "Planning Database - ProjectsList"
WHERE "Created By User" = user.email
```

#### 2. **Activities Created**
```sql
SELECT COUNT(*) FROM "Planning Database - BOQ Rates"
```

#### 3. **KPI Records**
```sql
SELECT COUNT(*) FROM "Planning Database - KPI"
WHERE "Recorded By" = user.email
```

---

## ๐ก๏ธ ูุธุงู ุงูุตูุงุญูุงุช

### **ุนุฑุถ ุงูุตูุงุญูุงุช:**
- ูุชู ุฌูุจ ุงูุตูุงุญูุงุช ูู `lib/permissionsSystem.ts`
- ุงุณุชุฎุฏุงู `getUserPermissions()` ููุญุตูู ุนูู ุงูุตูุงุญูุงุช ุงููุนุงูุฉ
- ุงุณุชุฎุฏุงู `generatePermissionsReport()` ูุฅูุดุงุก ุชูุฑูุฑ ููุตู

### **ุงูุชูุฑูุฑ ูุชุถูู:**
1. **Total Permissions**: ุฅุฌูุงูู ุงูุตูุงุญูุงุช
2. **Permissions by Category**: ุงูุตูุงุญูุงุช ุญุณุจ ุงููุฆุฉ
3. **Custom Status**: ูู ุงูุตูุงุญูุงุช ูุฎุตุตุฉุ
4. **Extra Permissions**: ุตูุงุญูุงุช ุฅุถุงููุฉ
5. **Missing Permissions**: ุตูุงุญูุงุช ูุญุฐููุฉ

---

## ๐จ ุงูุญุงูุงุช ูุงูุฃููุงู

### **Role Colors:**
```typescript
admin    โ Red    (bg-red-100)
manager  โ Blue   (bg-blue-100)
engineer โ Green  (bg-green-100)
viewer   โ Gray   (bg-gray-100)
```

### **Status Colors:**
```typescript
Active   โ Green  (bg-green-100)
Inactive โ Red    (bg-red-100)
```

### **Stats Cards:**
```typescript
Projects   โ Blue   (bg-blue-50)
Activities โ Green  (bg-green-50)
KPIs       โ Purple (bg-purple-50)
```

---

## ๐ ุงูุฃูุงู

### **ุชุบููุฑ ูููุฉ ุงููุฑูุฑ:**
- ูุชู ุงุณุชุฎุฏุงู Supabase Auth API
- ุงูุญุฏ ุงูุฃุฏูู: 6 ุฃุญุฑู
- ูุฌุจ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
- ูุง ูุชุทูุจ ูููุฉ ุงููุฑูุฑ ุงููุฏููุฉ (Supabase Session-based)

```typescript
await supabase.auth.updateUser({
  password: newPassword
})
```

### **ุญูุงูุฉ ุงูุจูุงูุงุช:**
- ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจู RLS (Row Level Security)
- ุงููุณุชุฎุฏู ููููู ููุท ุฑุคูุฉ ูุชุนุฏูู ุจูุงูุงุชู ุงูุดุฎุตูุฉ
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุงุจู ููุชุนุฏูู

---

## ๐ฑ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### **1. ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ:**
1. ุชุณุฌูู ุงูุฏุฎูู ูููุฑุฉ ุงูุฃููู
2. ุงูุงูุชูุงู ุฅูู Profile
3. ุฅููุงู ุงููุนูููุงุช ุงูุดุฎุตูุฉ
4. ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ (ุงุฎุชูุงุฑู)

### **2. ุชุญุฏูุซ ุงููุนูููุงุช:**
1. ูุชุญ ุงูุตูุญุฉ ุงูุดุฎุตูุฉ
2. ุงูููุฑ ุนูู "Edit Profile"
3. ุชุนุฏูู ุงูุญููู
4. ุญูุธ ุงูุชุบููุฑุงุช

### **3. ูุฑุงุฌุนุฉ ุงูุตูุงุญูุงุช:**
1. ูุชุญ ุงูุตูุญุฉ ุงูุดุฎุตูุฉ
2. ุงูุชูุฑูุฑ ุฅูู "My Permissions"
3. ูุฑุงุฌุนุฉ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ
4. ุงูุชุญูู ูู ุงููููุฏ ูุงูุตูุงุญูุงุช ุงูุฅุถุงููุฉ

---

## ๐ ุงูุงุณุชุฎุฏุงู

### **ุงููุตูู ุฅูู ุงูุตูุญุฉ:**
```typescript
// ูู ุงูู Sidebar
<ModernSidebar activeTab="profile" onTabChange={handleTabChange} />

// ุฃู ูุจุงุดุฑุฉ
router.push('/profile')
```

### **Component Usage:**
```tsx
import { UserProfile } from '@/components/users/UserProfile'

function ProfilePage() {
  return <UserProfile />
}
```

---

## โ๏ธ ุงูุชุฎุตูุต

### **ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ:**
1. ุฅุถุงูุฉ ุงูุญูู ูู `formData` state
2. ุฅุถุงูุฉ UI element ูู ุงููุณู ุงูููุงุณุจ
3. ุชุญุฏูุซ ุฏุงูุฉ `handleUpdateProfile`

```typescript
const [formData, setFormData] = useState({
  full_name: '',
  division: '',
  phone: '',
  position: '',
  // ุฅุถุงูุฉ ุญูู ุฌุฏูุฏ
  department: ''
})
```

### **ุฅุถุงูุฉ ุฅุญุตุงุฆูุฉ ุฌุฏูุฏุฉ:**
```typescript
const loadActivityStats = async (userId: string) => {
  // ุฅุถุงูุฉ ุงุณุชุนูุงู ุฌุฏูุฏ
  const { data: newStat } = await supabase
    .from('your_table')
    .select('*', { count: 'exact', head: true })
    .eq('user_id', userId)
  
  setActivityStats(prev => ({
    ...prev,
    newStat: newStat?.length || 0
  }))
}
```

---

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### **ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**

1. **ูุดู ุชุญููู ุงูุจูุงูุงุช:**
```typescript
if (userError) throw userError
setError('Unable to load user profile')
```

2. **ูููุฉ ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ:**
```typescript
if (passwordData.newPassword !== passwordData.confirmPassword) {
  setError('New passwords do not match')
  return
}
```

3. **ูููุฉ ูุฑูุฑ ูุตูุฑุฉ:**
```typescript
if (passwordData.newPassword.length < 6) {
  setError('Password must be at least 6 characters')
  return
}
```

---

## ๐ ุงูุฃุฏุงุก

### **ุงูุชุญุณููุงุช:**
- โ ุชุญููู ุงูุจูุงูุงุช ูุฑุฉ ูุงุญุฏุฉ ุนูุฏ mount
- โ ุงุณุชุฎุฏุงู `LoadingSpinner` ุฃุซูุงุก ุงูุชุญููู
- โ ุงูุชุญุฏูุซ ุงูููุฑู ุจุนุฏ ุงูุญูุธ
- โ ุฑุณุงุฆู ูุฌุงุญ/ุฎุทุฃ ูุงุถุญุฉ

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### **ุชุญุณููุงุช ููุชุฑุญุฉ:**
1. โจ ุฅุถุงูุฉ ุฑูุน ุตูุฑุฉ ุดุฎุตูุฉ
2. ๐ง ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
3. ๐ ุฑุณู ุจูุงูู ููุดุงุท ุงููุณุชุฎุฏู
4. ๐ ุณุฌู ุงููุดุงุทุงุช ุงูุฃุฎูุฑุฉ
5. ๐ ุชูุถููุงุช ุงููุบุฉ ูุงูููุทูุฉ ุงูุฒูููุฉ
6. ๐จ ุชุฎุตูุต ุงูุซูู ุงูุดุฎุตู
7. ๐ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช

---

## โ ุงูุฎูุงุตุฉ

ุชู ุฅูุดุงุก ุตูุญุฉ ุดุฎุตูุฉ ูุชูุงููุฉ ุชุดูู:
- โ ุชุนุฏูู ุงููุนูููุงุช ุงูุดุฎุตูุฉ
- โ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- โ ุนุฑุถ ุงูุตูุงุญูุงุช ุงูุชูุตููู
- โ ุฅุญุตุงุฆูุงุช ุงููุดุงุท
- โ ูุนูููุงุช ุงูุญุณุงุจ
- โ ุชุตููู ุญุฏูุซ ููุชุฌุงูุจ
- โ ุชูุงูู ูุงูู ูุน ุงููุธุงู

---

**ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ:** RABAT Engineering Planning System  
**ุงูุชุงุฑูุฎ:** 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0

